# Введение 

## Функциональный JavaScript

Функциональное программирование стало появляться в JavaScript какое-то время назад:

- Такие библиотеки как [UnderscoreJS](http://underscorejs.org) позволили разработчику использовать проверенные и надежные функции, такие как `map`, `filter` и `reduce` для создания бОльших программ из композиции таких функций:

    ```javascript
    var sumOfPrimes =
        _.chain(_.range(1000))
         .filter(isPrime)
         .reduce(function(x, y) {
             return x + y;
         })
         .value();
    ```

- Асинхронное программирование в NodeJS серьезно опирается на функции высшего порядка для создания колбэков

    ```javascript
    require('fs').readFile(sourceFile, function (error, data) {
      if (!error) {
        require('fs').writeFile(destFile, data, function (error) {
          if (!error) {
            console.log("File copied");
          }
        });
      }
    });
    ```

- Библиотеки, такие как [React](http://facebook.github.io/react/) и [virtual-dom](https://github.com/Matt-Esch/virtual-dom), моделируют представления как чистые функции от состояния приложения.

Функции позволяют реализовывать простые абстракции, которые дают большой прирост продуктивности. Однако, функциональное программирование в JavaScript имеет свои недостатки: JavaScript многословен, нетипизирован и не имеет мощных форм абстракции. Неограниченный JavaScript код делает трудным разбор вычислений.

PureScript это язык программирования, нацеленный на решение этих проблем. Он имеет легковесный синтаксис, позволяющий писать очень выразительный, но в тоже время чистый и читаемый код. Он имеет богатую систему типов для создания мощных абстракций. Он также генерирует быстрый и понятный код, что важно при взаимодействии с JavaScript или другими языками, компилируемыми в JavaScript. В общем, я надеюсь убедить вас в том, что PureScript нашел очень практичную нишу между мощью чистого функционального программирования и быстрым и расслабленным стилем программирования на JavaScript.  

## Типы и вывод типов

Спор между сторонниками статически типизированных языков и сторонниками динамически типизированных хорошо известен. PureScript - это _статически типизированный_ язык, что означает что корректной программе присваивается _тип_ компилятором, указывающий её поведение. Напротив, программы, которым не может быть присвоен тип являются _некорректными программами_, и будут отвергнуты компилятором. В PureScript, в отличие от динамических языков, типы существуют только на _этапе компиляции_, и не существуют на этапе исполнения. 

Важно отметить что во многих случаях типы в PureScript отличаются от типов, которые вы могли бы видеть в других языках программирования, таких как Java или C#. В то время, как они служат одной и той же цели на высоком уровне, типы в PureScript вдохновлены такими языками, как ML и Haskell. Типы PureScript выразительные, что позволяет разработчику делать сильные утверждения о работе его программы. Самое важное - система типов PureScript поддерживает _вывод типов_ - это требует намного меньше явного аннотирования типами, чем в других языках, делая систему типов _инструментом_ а не помехой. В качестве примера - следующий код определяет _число_, но здесь нигде не упоминается тип `Number` в коде:  


```haskell
iAmANumber =
  let square x = x * x
  in square 42.0
```

Более сложный пример, показывающий что корректность типов может быть доказана без аннотации типами, даже когда есть типы которые _неизвестны компилятору_:

```haskell
iterate f 0 x = x
iterate f n x = iterate f (n - 1) (f x)
```

Тип `x` неизвестен, но компилятор всё равно может подтвердить подчинение `iterate` правилам системы типов, вне зависимости от того, какой тип может принять `x`.

В этой книге я постараюсь убедить вас (или укрепить вашу веру) что статические типы это не только средство убеждения себя в корректности ваших программ, но и помощь в собственно разработке. Рефакторинг большого куска кода в JavaScript может быть тяжелым занятием, когда используешь любые абстракции кроме простейших, в то время как выразительная система типов вкупе с тайп-чекером может превратить рефакторинг в интерактивное развлечение.

В дополнение, страховка, предоставляемая системой типов, допускает более продвинутые формы абстракциии. Фактически, PureScript предоставляет мощную форму абстракции которая вообще невозможна без системы типов: классы типов, популярные в функциональном языке программирования Haskell 

## Полиглотное Веб-программирование 

Функциональное программирование имеет свои истории успешного применения - приложения, где оно успешно применялось: анализ данных, парсинг, создание компиляторов, обобщенное программирование, параллелизм и т.д.

Можно создать приложение на PureScript целиком и полностью. PureScript предоставляет возможность использовать существующий JavaScript код, через указание типов для его значений и функции, чтобы использовать эти функции в обычном PureScript коде. Мы разберем этот подход далее в книге.

Однако, одна из сильных сторон PureScript это взаимодействие с другими языками, компилируемыми в JavaScript. Другим подходом будет использование PureScript для разработки определенных частей приложения, и использование одного или более языков для написания оставшейся части JavaScript

Несколько примеров:

- Основная логика написана на PureScript, интерфейс - на JavaScript

- Приложение написано на JavaScript или другом языке, компилируемом в JS, тесты написаны на PureScript

- PureScript использован для автоматизации тестирования интерфейса существующего приложения


В этой книге я сфокусируюсь на решении небольших проблем при помощи PureScript. Решения могут быть интегрированы в большое приложение, но мы также посмотрим на то, как вызвать PureScript код из JavaScript и наоборот.

## Необходимые требования

Требования к ПО в данной книге минимальны: первая глава будет посвящена настройке среды разработки с нуля, и те инструменты, которые мы будем использовать доступны в стандартных репозиториях большинства современных операционных систем.

Компилятор PureScript может быть скачан в виде скомпилированного пакета или скомпилирован из исходников на любой системе, где установлена последняя версия компилятора Haskell GHC. Мы пройдем этот процесс в следующей главе.

Код в данной версии книги совместим с версиями `0.10.*` компилятора PureScript 

## О Вас

Я буду считать что вы знакомы с JavaScript на базовом уровне. Любое знакомство с общими инструментами из экосистемы JavaScript, такими как NPM и Gulp, будет полезно, если вы хотите настроить стандартную установку под свои нужды. Но это знание не обязательно. 

Предварительных знаний из функционального программирования не требуется, но это не повредит. Новые идеи будут сопровождены практическими примерами, так что вы должны будете освоить те концепции из функционального программирования, что мы будем использовать. 

Читатели, уже знакомые с языком программирования Haskell, увидят много знакомых концепци и знакомый синтаксис в данной книге, так как Haskell сильно повлиял на PureScript. Однако, эти читатели должны понять, что есть некоторое число важных отличий между PureScript и Haskell. Не всегда целесообразно применять идеи из одного языка в другом, хотя многие концепции, представленные здесь, будут иметь некоторую интерпретацию в Haskell.

## Как читать эту книгу

Главы в этой книге по большей части самодостаточны. Новичок с небольшим опытом функционального программирования будет чувствовать себя комфортно, проходя главы по-порядку. Первые несколько глав объясняют основы, необходимые для понимания дальнейшего материала в книге. Читатель, знакомый с идеями функционального программирования (особенно, имеющий опыт работы со строго-типизированными языками такими, как ML или Haskell) получит общее представление о коде в поздних главах книги, не читая начальные.

Каждая глава сфокусирована на одном практическом примере, побуждающем познакомиться с новыми идеями. Код каждой главы доступен в исходных кодах книги в репозитории на [GitHub](http://github.com/paf31/purescript-book). Некоторые главы включают сниппеты, взятые из исходников, но для полного понимания, вам необходимо читать исходники с примерами бок о бок с материалом из книги. Длинные разделы будут содержать небольшие примеры кода, которые вы можете запустить в интерактивном режиме PSCi для проверки своего понимания.

Примеры кода будут представлены в моноширинном шрифте, как тут:

```haskell
module Example where

import Control.Monad.Eff.Console (log)

main = log "Hello, World!"
```

Команды, которые должны быть запущены в консоли будут со знаком доллара в начале:

```text
$ pulp build
```

Эти команды обычно указываются для пользоватлей Linux/MacOS, поэтому пользователям Windows нужно делать небольшие изменения, например - поменять разделитель для директорий или заменить встроенные программы shell на их Windows эквиваленты.

Команды, которые печатаются в интерактивном режиме PSCi будут обозначены угловой скобкой:

```text
> 1 + 2
3
```

Каждая глава будет содержать упражнения, для которых будут выставлены уровни сложности. Убедительно рекомендуется пытаться решить все упражнения в каждой главе для полного понимания материала.

Цель данной книги - предоставить введение в язык PureScript для новичков, но это не тот тип книги, который дают типичные решения определенных проблем. Для новичков эта книга должна быть увлекательным `вызовом`, и вы получите наибольшую выгоду если читаете материал, решаете упражения и важнее всего - пытаетесь сделать что-нибудь своё. 

## Получение помощи

Если вы застряли где-то, существует множество online-ресурсов для обучения PureScript:

- IRC канал PureScript - это отличное место для обсуждения проблем, с которыми вы столкнулись. Настройте свой IRC клиент на irc.freenode.net и подключитесь к каналу #purescript

- [PureScript website](http://purescript.org) содержит ссылки на некоторые обучащие ресурсы, включающие примеры кода, видео и другие материалы для новичков.

- На [PureScript вики](http://wiki.purescript.org) собираются статьи и примеры, написанные разработчиками и пользователями PureScript

- [Try PureScript!](http://try.purescript.org) - вебсайт, который позволяет пользователям скомпилировать PureScript код прямо в браузере. Содержит несколько простых примеров кода 

- [Pursuit](http://pursuit.purescript.org) база данных с функцией поиска по типам и функциям PureScript.

Если вы предпочитаете учиться на примерах - организации `purescript`, `purescript-node` и `purescript-contrib` на GitHub содержат много примеров кода на PureScript.

## Об авторе

Я являюсь создателем компилятора языка PureScript. Нахожусь в Лос-Анжелесе, штат Калифорния. Начал программировать в раннем возрасте на BASIC'е, на восьмибитном персональном компьютере Amstrad CPC. В дальнейшем работал c различными языками программирования (включая Java, Scala, C#, F#, Haskell и PureScript).

Довольно быстро после начала моей профессиональной карьеры я начал ценить функциональное программирование и его связи с математикой, и начал получать удовольствие, изучая функциональные концепции в процессе использования языка программирования Haskell.

Я начал работать над компилятором PureScript в результате опыта работы с JavaScript. Я обнаружил, что использую функциональные техники, которые приобрел в таких языках, как Haskell, однако хотел более строгого окружения, в котором можно их применить. Доступные решения к тому времени включали различные попытки компилирования Haskell в JavaScript (Fay, Haste, GHCJS), сохраняя при этом его семантику. Но мне было интересно, насколько удачно получится решить проблему с другой стороны - попытаться сохранить семантику JavaScript, наслаждаясь при этом синтаксисом и системой типов языка, похожего на Haskell. 

Я поддерживаю [блог](http://blog.functorial.com), и могу быть доступен через [twitter](http://twitter.com/paf31).

## Благодарности 

Хотелось бы поблагодарить многочисленных участников, которые помогли PureScript достичь его текущего состояния. Без этих огромных коллективных усилий, создавших компилятор, инструменты, библиотеку, документацию и тесты, проект однозначно бы провалился.

Логотип PureScript на обложке книги был создан Gareth Hughes, с благодарностью здесь использован под лицензией [Creative Commons Attribution 4.0 license](https://creativecommons.org/licenses/by/4.0/).

Наконец, хотелось бы поблагодарить всех, кто снабжал меня обратной связью и исправлениями по содержанию этой книги.

[<=](https://github.com/ashgaliyev/purescript-book-ru/blob/master/README.md "Предыдущая глава")                                        [=>](https://github.com/ashgaliyev/purescript-book-ru/blob/master/text/chapter2.md "Следующая глава")
